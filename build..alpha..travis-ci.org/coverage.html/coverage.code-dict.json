{"/home/travis/build/npmtest/node-npmtest-testdouble/test.js":"/* istanbul instrument in package npmtest_testdouble */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - init-before\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        switch (local.modeJs) {\n        // re-init local from window.local\n        case 'browser':\n            local = local.global.utility2.objectSetDefault(\n                local.global.utility2_rollup || local.global.local,\n                local.global.utility2\n            );\n            break;\n        // re-init local from example.js\n        case 'node':\n            local = (local.global.utility2_rollup || require('utility2'))\n                .requireReadme();\n            break;\n        }\n        // export local\n        local.global.local = local;\n    }());\n\n\n\n    // run shared js-env code - function\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - function\n    case 'browser':\n        break;\n\n\n\n    // run node js-env code - function\n    case 'node':\n        break;\n    }\n\n\n\n    // run shared js-env code - init-after\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - init-after\n    case 'browser':\n        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test browsers's null-case handling-behavior-behavior\n         */\n            onError(null, options);\n        };\n\n        // run tests\n        local.nop(local.modeTest &&\n            document.querySelector('#testRunButton1') &&\n            document.querySelector('#testRunButton1').click());\n        break;\n\n\n\n    // run node js-env code - init-after\n    /* istanbul ignore next */\n    case 'node':\n        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApidoc's default handling-behavior-behavior\n         */\n            options = { modulePathList: module.paths };\n            local.buildApidoc(options, onError);\n        };\n\n        local.testCase_buildApp_default = local.testCase_buildApp_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApp's default handling-behavior-behavior\n         */\n            local.testCase_buildReadme_default(options, local.onErrorThrow);\n            local.testCase_buildLib_default(options, local.onErrorThrow);\n            local.testCase_buildTest_default(options, local.onErrorThrow);\n            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);\n            options = [];\n            local.buildApp(options, onError);\n        };\n\n        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||\n            function (options, onError) {\n            /*\n             * this function will test buildCustomOrg's default handling-behavior\n             */\n                options = {};\n                local.buildCustomOrg(options, onError);\n            };\n\n        local.testCase_buildLib_default = local.testCase_buildLib_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildLib's default handling-behavior\n         */\n            options = {};\n            local.buildLib(options, onError);\n        };\n\n        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildReadme's default handling-behavior-behavior\n         */\n            options = {};\n            local.buildReadme(options, onError);\n        };\n\n        local.testCase_buildTest_default = local.testCase_buildTest_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildTest's default handling-behavior\n         */\n            options = {};\n            local.buildTest(options, onError);\n        };\n\n        local.testCase_webpage_default = local.testCase_webpage_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test webpage's default handling-behavior\n         */\n            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };\n            local.browserTest(options, onError);\n        };\n\n        // run test-server\n        local.testRunServer(local);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-testdouble/lib.npmtest_testdouble.js":"/* istanbul instrument in package npmtest_testdouble */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - init-before\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || local;\n        // init lib\n        local.local = local.npmtest_testdouble = local;\n        // init exports\n        if (local.modeJs === 'browser') {\n            local.global.utility2_npmtest_testdouble = local;\n        } else {\n            module.exports = local;\n            module.exports.__dirname = __dirname;\n            module.exports.module = module;\n        }\n    }());\n}());\n","/home/travis/build/npmtest/node-npmtest-testdouble/example.js":"/*\nexample.js\n\nquickstart example\n\ninstruction\n    1. save this script as example.js\n    2. run the shell command:\n        $ npm install npmtest-testdouble && PORT=8081 node example.js\n    3. play with the browser-demo on http://127.0.0.1:8081\n*/\n\n\n\n/* istanbul instrument in package npmtest_testdouble */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - init-before\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || (local.modeJs === 'browser'\n            ? local.global.utility2_npmtest_testdouble\n            : global.utility2_moduleExports);\n        // export local\n        local.global.local = local;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // init-after\n    // run browser js-env code - init-after\n    /* istanbul ignore next */\n    case 'browser':\n        local.testRunBrowser = function (event) {\n            if (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('onreset'))) {\n                // reset output\n                Array.from(\n                    document.querySelectorAll('body > .resettable')\n                ).forEach(function (element) {\n                    switch (element.tagName) {\n                    case 'INPUT':\n                    case 'TEXTAREA':\n                        element.value = '';\n                        break;\n                    default:\n                        element.textContent = '';\n                    }\n                });\n            }\n            switch (event && event.currentTarget && event.currentTarget.id) {\n            case 'testRunButton1':\n                // show tests\n                if (document.querySelector('#testReportDiv1').style.display === 'none') {\n                    document.querySelector('#testReportDiv1').style.display = 'block';\n                    document.querySelector('#testRunButton1').textContent =\n                        'hide internal test';\n                    local.modeTest = true;\n                    local.testRunDefault(local);\n                // hide tests\n                } else {\n                    document.querySelector('#testReportDiv1').style.display = 'none';\n                    document.querySelector('#testRunButton1').textContent = 'run internal test';\n                }\n                break;\n            // custom-case\n            default:\n                break;\n            }\n            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('oneval')))) {\n                // try to eval input-code\n                try {\n                    /*jslint evil: true*/\n                    eval(document.querySelector('#inputTextareaEval1').value);\n                } catch (errorCaught) {\n                    console.error(errorCaught);\n                }\n            }\n        };\n        // log stderr and stdout to #outputTextareaStdout1\n        ['error', 'log'].forEach(function (key) {\n            console[key + '_original'] = console[key];\n            console[key] = function () {\n                var element;\n                console[key + '_original'].apply(console, arguments);\n                element = document.querySelector('#outputTextareaStdout1');\n                if (!element) {\n                    return;\n                }\n                // append text to #outputTextareaStdout1\n                element.value += Array.from(arguments).map(function (arg) {\n                    return typeof arg === 'string'\n                        ? arg\n                        : JSON.stringify(arg, null, 4);\n                }).join(' ') + '\\n';\n                // scroll textarea to bottom\n                element.scrollTop = element.scrollHeight;\n            };\n        });\n        // init event-handling\n        ['change', 'click', 'keyup'].forEach(function (event) {\n            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {\n                element.addEventListener(event, local.testRunBrowser);\n            });\n        });\n        // run tests\n        local.testRunBrowser();\n        break;\n\n\n\n    // run node js-env code - init-after\n    /* istanbul ignore next */\n    case 'node':\n        // export local\n        module.exports = local;\n        // require modules\n        local.fs = require('fs');\n        local.http = require('http');\n        local.url = require('url');\n        // init assets\n        local.assetsDict = local.assetsDict || {};\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.index.template.html'] = '\\\n<!doctype html>\\n\\\n<html lang=\"en\">\\n\\\n<head>\\n\\\n<meta charset=\"UTF-8\">\\n\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n    box-sizing: false,\\n\\\n    universal-selector: false\\n\\\n*/\\n\\\n* {\\n\\\n    box-sizing: border-box;\\n\\\n}\\n\\\nbody {\\n\\\n    background: #dde;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n    margin: 2rem;\\n\\\n}\\n\\\nbody > * {\\n\\\n    margin-bottom: 1rem;\\n\\\n}\\n\\\n.utility2FooterDiv {\\n\\\n    margin-top: 20px;\\n\\\n    text-align: center;\\n\\\n}\\n\\\n</style>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n*/\\n\\\ntextarea {\\n\\\n    font-family: monospace;\\n\\\n    height: 10rem;\\n\\\n    width: 100%;\\n\\\n}\\n\\\ntextarea[readonly] {\\n\\\n    background: #ddd;\\n\\\n}\\n\\\n</style>\\n\\\n</head>\\n\\\n<body>\\n\\\n<!-- utility2-comment\\n\\\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\\nutility2-comment -->\\n\\\n<h1>\\n\\\n<!-- utility2-comment\\n\\\n    <a\\n\\\n        {{#if env.npm_package_homepage}}\\n\\\n        href=\"{{env.npm_package_homepage}}\"\\n\\\n        {{/if env.npm_package_homepage}}\\n\\\n        target=\"_blank\"\\n\\\n    >\\n\\\nutility2-comment -->\\n\\\n        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\\n<!-- utility2-comment\\n\\\n    </a>\\n\\\nutility2-comment -->\\n\\\n</h1>\\n\\\n<h3>{{env.npm_package_description}}</h3>\\n\\\n<!-- utility2-comment\\n\\\n<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\\n<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\\n<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\\nutility2-comment -->\\n\\\n\\n\\\n\\n\\\n\\n\\\n<label>stderr and stdout</label>\\n\\\n<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\\n<!-- utility2-comment\\n\\\n{{#if isRollup}}\\n\\\n<script src=\"assets.app.js\"></script>\\n\\\n{{#unless isRollup}}\\n\\\nutility2-comment -->\\n\\\n<script src=\"assets.utility2.rollup.js\"></script>\\n\\\n<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\\n<script src=\"assets.npmtest_testdouble.rollup.js\"></script>\\n\\\n<script src=\"assets.example.js\"></script>\\n\\\n<script src=\"assets.test.js\"></script>\\n\\\n<!-- utility2-comment\\n\\\n{{/if isRollup}}\\n\\\nutility2-comment -->\\n\\\n<div class=\"utility2FooterDiv\">\\n\\\n    [ this app was created with\\n\\\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\\n    ]\\n\\\n</div>\\n\\\n</body>\\n\\\n</html>\\n\\\n';\n        /* jslint-ignore-end */\n        if (local.templateRender) {\n            local.assetsDict['/'] = local.templateRender(\n                local.assetsDict['/assets.index.template.html'],\n                {\n                    env: local.objectSetDefault(local.env, {\n                        npm_package_description: 'the greatest app in the world!',\n                        npm_package_name: 'my-app',\n                        npm_package_nameAlias: 'my_app',\n                        npm_package_version: '0.0.1'\n                    })\n                }\n            );\n        } else {\n            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']\n                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {\n                    // jslint-hack\n                    String(match0);\n                    switch (match1) {\n                    case 'npm_package_description':\n                        return 'the greatest app in the world!';\n                    case 'npm_package_name':\n                        return 'my-app';\n                    case 'npm_package_nameAlias':\n                        return 'my_app';\n                    case 'npm_package_version':\n                        return '0.0.1';\n                    }\n                });\n        }\n        // run the cli\n        if (local.global.utility2_rollup || module !== require.main) {\n            break;\n        }\n        local.assetsDict['/assets.example.js'] =\n            local.assetsDict['/assets.example.js'] ||\n            local.fs.readFileSync(__filename, 'utf8');\n        // bug-workaround - long $npm_package_buildCustomOrg\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.npmtest_testdouble.rollup.js'] =\n            local.assetsDict['/assets.npmtest_testdouble.rollup.js'] ||\n            local.fs.readFileSync(\n                local.npmtest_testdouble.__dirname + '/lib.npmtest_testdouble.js',\n                'utf8'\n            ).replace((/^#!/), '//');\n        /* jslint-ignore-end */\n        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';\n        // if $npm_config_timeout_exit exists,\n        // then exit this process after $npm_config_timeout_exit ms\n        if (Number(process.env.npm_config_timeout_exit)) {\n            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n        }\n        // start server\n        if (local.global.utility2_serverHttp1) {\n            break;\n        }\n        process.env.PORT = process.env.PORT || '8081';\n        console.error('server starting on port ' + process.env.PORT);\n        local.http.createServer(function (request, response) {\n            request.urlParsed = local.url.parse(request.url);\n            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n                response.end(local.assetsDict[request.urlParsed.pathname]);\n                return;\n            }\n            response.statusCode = 404;\n            response.end();\n        }).listen(process.env.PORT);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/testdouble.js":"'use strict';\n\nvar _callback = require('./matchers/callback');\n\nvar _callback2 = _interopRequireDefault(_callback);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _constructor = require('./constructor');\n\nvar _constructor2 = _interopRequireDefault(_constructor);\n\nvar _explain = require('./explain');\n\nvar _explain2 = _interopRequireDefault(_explain);\n\nvar _matchers = require('./matchers');\n\nvar _matchers2 = _interopRequireDefault(_matchers);\n\nvar _object = require('./object');\n\nvar _object2 = _interopRequireDefault(_object);\n\nvar _replace = require('./replace');\n\nvar _replace2 = _interopRequireDefault(_replace);\n\nvar _reset = require('./reset');\n\nvar _reset2 = _interopRequireDefault(_reset);\n\nvar _function = require('./function');\n\nvar _function2 = _interopRequireDefault(_function);\n\nvar _verify = require('./verify');\n\nvar _verify2 = _interopRequireDefault(_verify);\n\nvar _version = require('./version');\n\nvar _version2 = _interopRequireDefault(_version);\n\nvar _when = require('./when');\n\nvar _when2 = _interopRequireDefault(_when);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = {\n  function: _function2.default,\n  func: _function2.default,\n  object: _object2.default,\n  constructor: _constructor2.default,\n  when: _when2.default,\n  verify: _verify2.default,\n  matchers: _matchers2.default,\n  replace: _replace2.default,\n  explain: _explain2.default,\n  reset: _reset2.default,\n  config: _config2.default,\n  callback: _callback2.default,\n  version: _version2.default\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/matchers/callback.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _create = require('./create');\n\nvar _create2 = _interopRequireDefault(_create);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _lodashWrap2.default.tap((0, _create2.default)({\n  name: 'callback',\n  matches: function matches(matcherArgs, actual) {\n    return _lodashWrap2.default.isFunction(actual);\n  },\n  onCreate: function onCreate(matcherInstance, matcherArgs) {\n    matcherInstance.args = matcherArgs;\n    matcherInstance.__testdouble_callback = true;\n  }\n}), function (callback) {\n  // Make callback itself quack like a matcher for its non-invoked use case.\n  callback.__name = 'callback';\n  callback.__matches = _lodashWrap2.default.isFunction;\n\n  callback.isCallback = function (obj) {\n    return obj && (obj === callback || obj.__testdouble_callback === true);\n  };\n});","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/util/lodash-wrap.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _assign = require('lodash/assign');\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _capitalize = require('lodash/capitalize');\n\nvar _capitalize2 = _interopRequireDefault(_capitalize);\n\nvar _clone = require('lodash/clone');\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _defer = require('lodash/defer');\n\nvar _defer2 = _interopRequireDefault(_defer);\n\nvar _delay = require('lodash/delay');\n\nvar _delay2 = _interopRequireDefault(_delay);\n\nvar _each = require('lodash/each');\n\nvar _each2 = _interopRequireDefault(_each);\n\nvar _every = require('lodash/every');\n\nvar _every2 = _interopRequireDefault(_every);\n\nvar _extend = require('lodash/extend');\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _filter = require('lodash/filter');\n\nvar _filter2 = _interopRequireDefault(_filter);\n\nvar _find = require('lodash/find');\n\nvar _find2 = _interopRequireDefault(_find);\n\nvar _findLast = require('lodash/findLast');\n\nvar _findLast2 = _interopRequireDefault(_findLast);\n\nvar _flatten = require('lodash/flatten');\n\nvar _flatten2 = _interopRequireDefault(_flatten);\n\nvar _functions = require('lodash/functions');\n\nvar _functions2 = _interopRequireDefault(_functions);\n\nvar _get = require('lodash/get');\n\nvar _get2 = _interopRequireDefault(_get);\n\nvar _groupBy = require('lodash/groupBy');\n\nvar _groupBy2 = _interopRequireDefault(_groupBy);\n\nvar _includes = require('lodash/includes');\n\nvar _includes2 = _interopRequireDefault(_includes);\n\nvar _invoke = require('lodash/invoke');\n\nvar _invoke2 = _interopRequireDefault(_invoke);\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _isBoolean = require('lodash/isBoolean');\n\nvar _isBoolean2 = _interopRequireDefault(_isBoolean);\n\nvar _isEqual = require('lodash/isEqual');\n\nvar _isEqual2 = _interopRequireDefault(_isEqual);\n\nvar _isEqualWith = require('lodash/isEqualWith');\n\nvar _isEqualWith2 = _interopRequireDefault(_isEqualWith);\n\nvar _isFunction = require('lodash/isFunction');\n\nvar _isFunction2 = _interopRequireDefault(_isFunction);\n\nvar _isNumber = require('lodash/isNumber');\n\nvar _isNumber2 = _interopRequireDefault(_isNumber);\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _isRegExp = require('lodash/isRegExp');\n\nvar _isRegExp2 = _interopRequireDefault(_isRegExp);\n\nvar _isString = require('lodash/isString');\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _keys = require('lodash/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _last = require('lodash/last');\n\nvar _last2 = _interopRequireDefault(_last);\n\nvar _map = require('lodash/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _reduce = require('lodash/reduce');\n\nvar _reduce2 = _interopRequireDefault(_reduce);\n\nvar _reject = require('lodash/reject');\n\nvar _reject2 = _interopRequireDefault(_reject);\n\nvar _some = require('lodash/some');\n\nvar _some2 = _interopRequireDefault(_some);\n\nvar _tap = require('lodash/tap');\n\nvar _tap2 = _interopRequireDefault(_tap);\n\nvar _transform = require('lodash/transform');\n\nvar _transform2 = _interopRequireDefault(_transform);\n\nvar _union = require('lodash/union');\n\nvar _union2 = _interopRequireDefault(_union);\n\nvar _uniq = require('lodash/uniq');\n\nvar _uniq2 = _interopRequireDefault(_uniq);\n\nvar _without = require('lodash/without');\n\nvar _without2 = _interopRequireDefault(_without);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  assign: _assign2.default,\n  capitalize: _capitalize2.default,\n  clone: _clone2.default,\n  defer: _defer2.default,\n  delay: _delay2.default,\n  each: _each2.default,\n  every: _every2.default,\n  extend: _extend2.default,\n  filter: _filter2.default,\n  find: _find2.default,\n  findLast: _findLast2.default,\n  flatten: _flatten2.default,\n  functions: _functions2.default,\n  get: _get2.default,\n  groupBy: _groupBy2.default,\n  includes: _includes2.default,\n  invoke: _invoke2.default,\n  isArray: _isArray2.default,\n  isBoolean: _isBoolean2.default,\n  isEqual: _isEqual2.default,\n  isEqualWith: _isEqualWith2.default,\n  isFunction: _isFunction2.default,\n  isNumber: _isNumber2.default,\n  isPlainObject: _isPlainObject2.default,\n  isRegExp: _isRegExp2.default,\n  isString: _isString2.default,\n  keys: _keys2.default,\n  last: _last2.default,\n  map: _map2.default,\n  reduce: _reduce2.default,\n  reject: _reject2.default,\n  some: _some2.default,\n  tap: _tap2.default,\n  transform: _transform2.default,\n  union: _union2.default,\n  uniq: _uniq2.default,\n  without: _without2.default\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/matchers/create.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _arguments = require('../stringify/arguments');\n\nvar _arguments2 = _interopRequireDefault(_arguments);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (config) {\n  return function () {\n    for (var _len = arguments.length, matcherArgs = Array(_len), _key = 0; _key < _len; _key++) {\n      matcherArgs[_key] = arguments[_key];\n    }\n\n    return _lodashWrap2.default.tap({\n      __name: nameFor(config, matcherArgs),\n      __matches: function __matches(actualArg) {\n        return config.matches(matcherArgs, actualArg);\n      }\n    }, function (matcherInstance) {\n      return _lodashWrap2.default.invoke(config, 'onCreate', matcherInstance, matcherArgs);\n    });\n  };\n};\n\nvar nameFor = function nameFor(config, matcherArgs) {\n  if (_lodashWrap2.default.isFunction(config.name)) {\n    return config.name(matcherArgs);\n  } else if (config.name != null) {\n    return config.name + '(' + (0, _arguments2.default)(matcherArgs) + ')';\n  } else {\n    return '[Matcher for (' + (0, _arguments2.default)(matcherArgs) + ')]';\n  }\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/stringify/arguments.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _anything = require('./anything');\n\nvar _anything2 = _interopRequireDefault(_anything);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (args) {\n  var joiner = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ', ';\n  var wrapper = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n  return _lodashWrap2.default.map(args, function (arg) {\n    return '' + wrapper + (0, _anything2.default)(arg) + wrapper;\n  }).join(joiner);\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/stringify/anything.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _isMatcher = require('../matchers/is-matcher');\n\nvar _isMatcher2 = _interopRequireDefault(_isMatcher);\n\nvar _stringifyObjectEs = require('stringify-object-es5');\n\nvar _stringifyObjectEs2 = _interopRequireDefault(_stringifyObjectEs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (anything) {\n  if (_lodashWrap2.default.isString(anything)) {\n    return stringifyString(anything);\n  } else if ((0, _isMatcher2.default)(anything)) {\n    return anything.__name;\n  } else {\n    return (0, _stringifyObjectEs2.default)(anything, {\n      indent: '  ',\n      singleQuotes: false,\n      inlineCharacterLimit: 65,\n      transform: function transform(obj, prop, originalResult) {\n        if ((0, _isMatcher2.default)(obj[prop])) {\n          return obj[prop].__name;\n        } else {\n          return originalResult;\n        }\n      }\n    });\n  }\n};\n\nvar stringifyString = function stringifyString(string) {\n  return _lodashWrap2.default.includes(string, '\\n') ? '\"\"\"\\n' + string + '\\n\"\"\"' : '\"' + string.replace(new RegExp('\"', 'g'), '\\\\\"') + '\"';\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/matchers/is-matcher.js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (thing) {\n  return thing && thing.__matches;\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/config.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _log = require('./log');\n\nvar _log2 = _interopRequireDefault(_log);\n\nvar _anything = require('./stringify/anything');\n\nvar _anything2 = _interopRequireDefault(_anything);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DEFAULTS = {\n  promiseConstructor: global.Promise,\n  ignoreWarnings: false,\n  suppressErrors: false\n};\nvar configData = _lodashWrap2.default.extend({}, DEFAULTS);\n\nexports.default = _lodashWrap2.default.tap(function (overrides) {\n  ensureOverridesExist(overrides);\n  return _lodashWrap2.default.extend(configData, overrides);\n}, function (config) {\n  config.reset = function () {\n    configData = _lodashWrap2.default.extend({}, DEFAULTS);\n  };\n});\n\n\nvar ensureOverridesExist = function ensureOverridesExist(overrides) {\n  _lodashWrap2.default.each(overrides, function (val, key) {\n    if (!configData.hasOwnProperty(key)) {\n      _log2.default.error('td.config', '\"' + key + '\" is not a valid configuration key (valid keys are: ' + (0, _anything2.default)(_lodashWrap2.default.keys(configData)) + ')');\n    }\n  });\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/log.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  warn: function warn(func, msg, url) {\n    if (!(0, _config2.default)().ignoreWarnings && (typeof console === 'undefined' ? 'undefined' : _typeof(console)) === 'object' && console.warn) {\n      console.warn('Warning: testdouble.js - ' + func + ' - ' + msg + withUrl(url));\n    }\n  },\n  error: function error(func, msg, url) {\n    if (!(0, _config2.default)().suppressErrors) {\n      throw new Error('Error: testdouble.js - ' + func + ' - ' + msg + withUrl(url));\n    }\n  },\n  fail: function fail(msg) {\n    throw new Error(msg);\n  }\n};\n\n\nvar withUrl = function withUrl(url) {\n  return url != null ? ' (see: ' + url + ' )' : '';\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/constructor.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _getAllCustomPrototypalFunctionNames = require('./util/get-all-custom-prototypal-function-names');\n\nvar _getAllCustomPrototypalFunctionNames2 = _interopRequireDefault(_getAllCustomPrototypalFunctionNames);\n\nvar _function = require('./function');\n\nvar _function2 = _interopRequireDefault(_function);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nexports.default = function (typeOrNames) {\n  return _lodashWrap2.default.isFunction(typeOrNames) ? fakeConstructorFromType(typeOrNames) : fakeConstructorFromNames(typeOrNames);\n};\n\nvar fakeConstructorFromType = function fakeConstructorFromType(type) {\n  var name = type.name || '';\n  var fauxConstructor = (0, _function2.default)(name + ' constructor');\n\n  return _lodashWrap2.default.tap(function (_type) {\n    _inherits(TestDoubleConstructor, _type);\n\n    function TestDoubleConstructor() {\n      _classCallCheck(this, TestDoubleConstructor);\n\n      var _this = _possibleConstructorReturn(this, (TestDoubleConstructor.__proto__ || Object.getPrototypeOf(TestDoubleConstructor)).apply(this, arguments));\n\n      fauxConstructor.apply(undefined, arguments);\n      return _this;\n    }\n\n    return TestDoubleConstructor;\n  }(type), function (fakeType) {\n    // Override \"static\" functions with instance test doubles\n    _lodashWrap2.default.each(_lodashWrap2.default.functions(type), function (funcName) {\n      fakeType[funcName] = (0, _function2.default)(name + '.' + funcName);\n    });\n\n    // Override prototypal functions with instance test doubles\n    _lodashWrap2.default.each((0, _getAllCustomPrototypalFunctionNames2.default)(type), function (funcName) {\n      fakeType.prototype[funcName] = (0, _function2.default)(name + '#' + funcName);\n    });\n\n    addToStringMethodsToFakeType(fakeType, name);\n  });\n};\n\nvar fakeConstructorFromNames = function fakeConstructorFromNames(funcNames) {\n  return _lodashWrap2.default.tap(function TestDoubleConstructor() {\n    _classCallCheck(this, TestDoubleConstructor);\n  }, function (cls) {\n    _lodashWrap2.default.each(funcNames, function (funcName) {\n      cls.prototype[funcName] = (0, _function2.default)('#' + funcName);\n    });\n\n    addToStringMethodsToFakeType(cls);\n  });\n};\n\nvar addToStringMethodsToFakeType = function addToStringMethodsToFakeType(fakeType, name) {\n  fakeType.toString = function () {\n    return '[test double constructor' + (name ? ' for \"' + name + '\"' : '') + ']';\n  };\n\n  fakeType.prototype.toString = function () {\n    return '[test double instance of constructor' + (name ? ' \"' + name + '\"' : '') + ']';\n  };\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/util/get-all-custom-prototypal-function-names.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (type) {\n  return _lodashWrap2.default.uniq(_lodashWrap2.default.without(allPrototypeFunctionNames(type), 'constructor'));\n};\n\nvar allPrototypeFunctionNames = function allPrototypeFunctionNames(type) {\n  return _lodashWrap2.default.filter(allPrototypePropertyNames(type), function (propName) {\n    return _lodashWrap2.default.isFunction(type.prototype[propName]);\n  });\n};\n\nvar allPrototypePropertyNames = function allPrototypePropertyNames(type) {\n  return _lodashWrap2.default.flatten(_lodashWrap2.default.map(prototypeChain(type.prototype), Object.getOwnPropertyNames));\n};\n\nvar prototypeChain = function prototypeChain(proto) {\n  return isBuiltIn(proto) ? [] : [proto].concat(prototypeChain(Object.getPrototypeOf(proto)));\n};\n\nvar isBuiltIn = function isBuiltIn(proto) {\n  return proto == null || proto === Function.prototype || proto === Object.prototype;\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/function.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _calls = require('./store/calls');\n\nvar _calls2 = _interopRequireDefault(_calls);\n\nvar _copyProperties = require('./util/copy-properties');\n\nvar _copyProperties2 = _interopRequireDefault(_copyProperties);\n\nvar _store = require('./store');\n\nvar _store2 = _interopRequireDefault(_store);\n\nvar _stubbings = require('./store/stubbings');\n\nvar _stubbings2 = _interopRequireDefault(_stubbings);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (nameOrFunc, __optionalName) {\n  return _lodashWrap2.default.isFunction(nameOrFunc) ? createTestDoubleForFunction(nameOrFunc, __optionalName) : createTestDoubleNamed(nameOrFunc || __optionalName);\n};\n\nvar createTestDoubleForFunction = function createTestDoubleForFunction(func, optionalName) {\n  return _lodashWrap2.default.tap((0, _copyProperties2.default)(func, createTestDoubleNamed(func.name || optionalName)), function (testDouble) {\n    return _lodashWrap2.default.each(_lodashWrap2.default.functions(func), function (funcName) {\n      var tdName = (func.name || optionalName || '') + '.' + funcName;\n      testDouble[funcName] = createTestDoubleNamed(tdName);\n    });\n  });\n};\n\nvar createTestDoubleNamed = function createTestDoubleNamed(name) {\n  return _lodashWrap2.default.tap(createTestDoubleFunction(), function (testDouble) {\n    var entry = _store2.default.for(testDouble, true);\n    if (name != null) {\n      entry.name = name;\n      testDouble.toString = function () {\n        return '[test double for \"' + name + '\"]';\n      };\n    } else {\n      testDouble.toString = function () {\n        return '[test double (unnamed)]';\n      };\n    }\n  });\n};\n\nvar createTestDoubleFunction = function createTestDoubleFunction() {\n  return function testDouble() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _calls2.default.log(testDouble, args, this);\n    return _stubbings2.default.invoke(testDouble, args, this);\n  };\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/store/calls.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _argsMatch = require('../args-match');\n\nvar _argsMatch2 = _interopRequireDefault(_argsMatch);\n\nvar _index = require('./index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar callHistory = []; // <-- remember this to pop our DSL of when(<call>)/verify(<call>)\n_index2.default.onReset(function () {\n  callHistory = [];\n});\n\nexports.default = {\n  log: function log(testDouble, args, context) {\n    _index2.default.for(testDouble).calls.push({ args: args, context: context });\n    return callHistory.push({ testDouble: testDouble, args: args, context: context });\n  },\n  pop: function pop() {\n    return _lodashWrap2.default.tap(callHistory.pop(), function (call) {\n      if (call != null) {\n        _index2.default.for(call.testDouble).calls.pop();\n      }\n    });\n  },\n  wasInvoked: function wasInvoked(testDouble, args, config) {\n    var matchingInvocationCount = this.where(testDouble, args, config).length;\n    if (config.times != null) {\n      return matchingInvocationCount === config.times;\n    } else {\n      return matchingInvocationCount > 0;\n    }\n  },\n  where: function where(testDouble, args, config) {\n    return _lodashWrap2.default.filter(_index2.default.for(testDouble).calls, function (call) {\n      return (0, _argsMatch2.default)(args, call.args, config);\n    });\n  },\n  for: function _for(testDouble) {\n    return _index2.default.for(testDouble).calls;\n  }\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/args-match.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _isMatcher = require('./matchers/is-matcher');\n\nvar _isMatcher2 = _interopRequireDefault(_isMatcher);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (expectedArgs, actualArgs) {\n  var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (arityMismatch(expectedArgs, actualArgs, config)) {\n    return false;\n  } else if (config.allowMatchers !== false) {\n    return equalsWithMatchers(expectedArgs, actualArgs);\n  } else {\n    return _lodashWrap2.default.isEqual(expectedArgs, actualArgs);\n  }\n};\n\nvar arityMismatch = function arityMismatch(expectedArgs, actualArgs, config) {\n  return expectedArgs.length !== actualArgs.length && !config.ignoreExtraArgs;\n};\n\nvar equalsWithMatchers = function equalsWithMatchers(expectedArgs, actualArgs) {\n  return _lodashWrap2.default.every(expectedArgs, function (expectedArg, key) {\n    return argumentMatchesExpectation(expectedArg, actualArgs[key]);\n  });\n};\n\nvar argumentMatchesExpectation = function argumentMatchesExpectation(expectedArg, actualArg) {\n  if ((0, _isMatcher2.default)(expectedArg)) {\n    return matcherTestFor(expectedArg)(actualArg);\n  } else {\n    return _lodashWrap2.default.isEqualWith(expectedArg, actualArg, function (expectedEl, actualEl) {\n      if ((0, _isMatcher2.default)(expectedEl)) {\n        return matcherTestFor(expectedEl)(actualEl);\n      }\n    });\n  }\n};\n\nvar matcherTestFor = function matcherTestFor(matcher) {\n  return matcher.__matches;\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/store/index.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _events = require('events');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar storeEmitter = new _events.EventEmitter();\nvar globalStore = [];\n\nexports.default = {\n  onReset: function onReset(func) {\n    storeEmitter.on('reset', func);\n  },\n  reset: function reset() {\n    globalStore = [];\n    storeEmitter.emit('reset');\n  },\n  for: function _for(testDouble) {\n    var createIfNew = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    var entry = _lodashWrap2.default.find(globalStore, { testDouble: testDouble });\n    if (entry) {\n      return entry;\n    } else if (createIfNew) {\n      return _lodashWrap2.default.tap({\n        testDouble: testDouble,\n        stubbings: [],\n        calls: [],\n        verifications: []\n      }, function (newEntry) {\n        return globalStore.push(newEntry);\n      });\n    }\n  }\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/util/copy-properties.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defineProps = Object.defineProperties;\nvar getProps = Object.getOwnPropertyNames;\n\nexports.default = function (original, target) {\n  return _lodashWrap2.default.tap(target, function (target) {\n    defineProps(target, _lodashWrap2.default.transform(getProps(original), function (acc, p) {\n      if (!target.hasOwnProperty(p)) {\n        acc[p] = propertyDefinitionFor(original, p);\n      }\n    }));\n  });\n};\n\nvar propertyDefinitionFor = function propertyDefinitionFor(original, p) {\n  return {\n    configurable: true,\n    writable: true,\n    value: original[p],\n    enumerable: original.propertyIsEnumerable(p)\n  };\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/store/stubbings.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _argsMatch = require('../args-match');\n\nvar _argsMatch2 = _interopRequireDefault(_argsMatch);\n\nvar _callback = require('../matchers/callback');\n\nvar _callback2 = _interopRequireDefault(_callback);\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _log = require('../log');\n\nvar _log2 = _interopRequireDefault(_log);\n\nvar _index = require('./index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nexports.default = {\n  add: function add(testDouble, args, stubbedValues, config) {\n    return _index2.default.for(testDouble).stubbings.push({\n      callCount: 0,\n      stubbedValues: stubbedValues,\n      args: args,\n      config: config\n    });\n  },\n  invoke: function invoke(testDouble, actualArgs, actualContext) {\n    var stubbing = stubbingFor(testDouble, actualArgs);\n    if (stubbing) {\n      return executePlan(stubbing, actualArgs, actualContext);\n    }\n  },\n  for: function _for(testDouble) {\n    return _index2.default.for(testDouble).stubbings;\n  }\n};\n\n\nvar stubbingFor = function stubbingFor(testDouble, actualArgs) {\n  return _lodashWrap2.default.findLast(_index2.default.for(testDouble).stubbings, function (stubbing) {\n    return isSatisfied(stubbing, actualArgs);\n  });\n};\n\nvar executePlan = function executePlan(stubbing, actualArgs, actualContext) {\n  var value = stubbedValueFor(stubbing);\n  stubbing.callCount += 1;\n  invokeCallbackFor(stubbing, actualArgs);\n  switch (stubbing.config.plan) {\n    case 'thenReturn':\n      return value;\n    case 'thenDo':\n      return value.apply(actualContext, actualArgs);\n    case 'thenThrow':\n      throw value;\n    case 'thenResolve':\n      return createPromise(stubbing, value, true);\n    case 'thenReject':\n      return createPromise(stubbing, value, false);\n  }\n};\n\nvar invokeCallbackFor = function invokeCallbackFor(stubbing, actualArgs) {\n  if (_lodashWrap2.default.some(stubbing.args, _callback2.default.isCallback)) {\n    _lodashWrap2.default.each(stubbing.args, function (expectedArg, i) {\n      if (_callback2.default.isCallback(expectedArg)) {\n        callCallback(stubbing, actualArgs[i], callbackArgs(stubbing, expectedArg));\n      }\n    });\n  }\n};\n\nvar callbackArgs = function callbackArgs(stubbing, expectedArg) {\n  if (expectedArg.args != null) {\n    return expectedArg.args;\n  } else if (stubbing.config.plan === 'thenCallback') {\n    return stubbing.stubbedValues;\n  } else {\n    return [];\n  }\n};\n\nvar callCallback = function callCallback(stubbing, callback, args) {\n  if (stubbing.config.delay) {\n    return _lodashWrap2.default.delay.apply(_lodashWrap2.default, [callback, stubbing.config.delay].concat(_toConsumableArray(args)));\n  } else if (stubbing.config.defer) {\n    return _lodashWrap2.default.defer.apply(_lodashWrap2.default, [callback].concat(_toConsumableArray(args)));\n  } else {\n    return callback.apply(undefined, _toConsumableArray(args));\n  }\n};\n\nvar createPromise = function createPromise(stubbing, value, willResolve) {\n  var Promise = (0, _config2.default)().promiseConstructor;\n  ensurePromise(Promise);\n  return new Promise(function (resolve, reject) {\n    callCallback(stubbing, function () {\n      return willResolve ? resolve(value) : reject(value);\n    }, [value]);\n  });\n};\n\nvar stubbedValueFor = function stubbedValueFor(stubbing) {\n  return stubbing.callCount < stubbing.stubbedValues.length ? stubbing.stubbedValues[stubbing.callCount] : _lodashWrap2.default.last(stubbing.stubbedValues);\n};\n\nvar isSatisfied = function isSatisfied(stubbing, actualArgs) {\n  return (0, _argsMatch2.default)(stubbing.args, actualArgs, stubbing.config) && hasTimesRemaining(stubbing);\n};\n\nvar hasTimesRemaining = function hasTimesRemaining(stubbing) {\n  return stubbing.config.times == null ? true : stubbing.callCount < stubbing.config.times;\n};\n\nvar ensurePromise = function ensurePromise(Promise) {\n  if (Promise == null) {\n    return _log2.default.error('td.when', 'no promise constructor is set (perhaps this runtime lacks a native Promise\\nfunction?), which means this stubbing can\\'t return a promise to your\\nsubject under test, resulting in this error. To resolve the issue, set\\na promise constructor with `td.config`, like this:\\n\\n  td.config({\\n    promiseConstructor: require(\\'bluebird\\')\\n  })');\n  }\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/explain.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _calls = require('./store/calls');\n\nvar _calls2 = _interopRequireDefault(_calls);\n\nvar _store = require('./store');\n\nvar _store2 = _interopRequireDefault(_store);\n\nvar _arguments = require('./stringify/arguments');\n\nvar _arguments2 = _interopRequireDefault(_arguments);\n\nvar _stubbings = require('./store/stubbings');\n\nvar _stubbings2 = _interopRequireDefault(_stubbings);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (testDouble) {\n  if (_store2.default.for(testDouble, false) == null) {\n    return nullDescription();\n  }\n  var calls = _calls2.default.for(testDouble);\n  var stubs = _stubbings2.default.for(testDouble);\n\n  return {\n    name: _store2.default.for(testDouble).name,\n    callCount: calls.length,\n    calls: calls,\n    description: testdoubleDescription(testDouble, stubs, calls) + stubbingDescription(stubs) + callDescription(calls),\n    isTestDouble: true\n  };\n};\n\nvar nullDescription = function nullDescription() {\n  return {\n    name: undefined,\n    callCount: 0,\n    calls: [],\n    description: 'This is not a test double.',\n    isTestDouble: false\n  };\n};\n\nvar testdoubleDescription = function testdoubleDescription(testDouble, stubs, calls) {\n  return 'This test double ' + stringifyName(testDouble) + 'has ' + stubs.length + ' stubbings and ' + calls.length + ' invocations.';\n};\n\nvar stubbingDescription = function stubbingDescription(stubs) {\n  return stubs.length > 0 ? _lodashWrap2.default.reduce(stubs, function (desc, stub) {\n    return desc + ('\\n  - when called with `(' + (0, _arguments2.default)(stub.args) + ')`, then ' + planFor(stub) + ' ' + argsFor(stub) + '.');\n  }, '\\n\\nStubbings:') : '';\n};\n\nvar planFor = function planFor(stub) {\n  switch (stub.config.plan) {\n    case 'thenCallback':\n      return 'callback';\n    case 'thenResolve':\n      return 'resolve';\n    case 'thenReject':\n      return 'reject';\n    default:\n      return 'return';\n  }\n};\n\nvar argsFor = function argsFor(stub) {\n  switch (stub.config.plan) {\n    case 'thenCallback':\n      return '`(' + (0, _arguments2.default)(stub.stubbedValues, ', ') + ')`';\n    default:\n      return (0, _arguments2.default)(stub.stubbedValues, ', then ', '`');\n  }\n};\n\nvar callDescription = function callDescription(calls) {\n  return calls.length > 0 ? _lodashWrap2.default.reduce(calls, function (desc, call) {\n    return desc + ('\\n  - called with `(' + (0, _arguments2.default)(call.args) + ')`.');\n  }, '\\n\\nInvocations:') : '';\n};\n\nvar stringifyName = function stringifyName(testDouble) {\n  var name = _store2.default.for(testDouble).name;\n  return name ? '`' + name + '` ' : '';\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/matchers/index.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _create = require('./create');\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _captor = require('./builtin/captor');\n\nvar _captor2 = _interopRequireDefault(_captor);\n\nvar _isA = require('./builtin/is-a');\n\nvar _isA2 = _interopRequireDefault(_isA);\n\nvar _contains = require('./builtin/contains');\n\nvar _contains2 = _interopRequireDefault(_contains);\n\nvar _anything = require('./builtin/anything');\n\nvar _anything2 = _interopRequireDefault(_anything);\n\nvar _argThat = require('./builtin/arg-that');\n\nvar _argThat2 = _interopRequireDefault(_argThat);\n\nvar _not = require('./builtin/not');\n\nvar _not2 = _interopRequireDefault(_not);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  create: _create2.default,\n  captor: _captor2.default,\n  isA: _isA2.default,\n  anything: _anything2.default,\n  contains: _contains2.default,\n  argThat: _argThat2.default,\n  not: _not2.default\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/matchers/builtin/captor.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _create = require('../create');\n\nvar _create2 = _interopRequireDefault(_create);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  var captor = {\n    capture: (0, _create2.default)({\n      name: 'captor.capture',\n      matches: function matches(matcherArgs, actual) {\n        captor.values = captor.values || [];\n        captor.values.push(actual);\n        captor.value = actual;\n        return true;\n      }\n    })\n  };\n  return captor;\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/matchers/builtin/is-a.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _create = require('../create');\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _arguments = require('../../stringify/arguments');\n\nvar _arguments2 = _interopRequireDefault(_arguments);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = (0, _create2.default)({\n  name: function name(matcherArgs) {\n    var desc = _lodashWrap2.default.get(matcherArgs[0], 'name') || (0, _arguments2.default)(matcherArgs);\n    return 'isA(' + desc + ')';\n  },\n  matches: function matches(matcherArgs, actual) {\n    var type = matcherArgs[0];\n\n    if (type === Number) {\n      return _lodashWrap2.default.isNumber(actual);\n    } else if (type === String) {\n      return _lodashWrap2.default.isString(actual);\n    } else if (type === Boolean) {\n      return _lodashWrap2.default.isBoolean(actual);\n    } else {\n      return actual instanceof type;\n    }\n  }\n});","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/matchers/builtin/contains.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _create = require('../create');\n\nvar _create2 = _interopRequireDefault(_create);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = (0, _create2.default)({\n  name: 'contains',\n  matches: function matches(containings, actualArg) {\n    if (containings.length === 0) return false;\n\n    return _lodashWrap2.default.every(containings, function (containing) {\n      if (_lodashWrap2.default.isArray(containing)) {\n        return _lodashWrap2.default.some(actualArg, function (actualElement) {\n          return _lodashWrap2.default.isEqual(actualElement, containing);\n        });\n      } else if (_lodashWrap2.default.isPlainObject(containing) && _lodashWrap2.default.isPlainObject(actualArg)) {\n        return containsAllSpecified(containing, actualArg);\n      } else if (_lodashWrap2.default.isRegExp(containing)) {\n        return containing.test(actualArg);\n      } else {\n        return _lodashWrap2.default.includes(actualArg, containing);\n      }\n    });\n  }\n});\n\n\nvar containsAllSpecified = function containsAllSpecified(containing, actual) {\n  return actual != null && _lodashWrap2.default.every(containing, function (val, key) {\n    return _lodashWrap2.default.isPlainObject(val) ? containsAllSpecified(val, actual[key]) : _lodashWrap2.default.isEqual(val, actual[key]);\n  });\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/matchers/builtin/anything.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _create = require('../create');\n\nvar _create2 = _interopRequireDefault(_create);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = (0, _create2.default)({\n  name: 'anything',\n  matches: function matches() {\n    return true;\n  }\n});","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/matchers/builtin/arg-that.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _create = require('../create');\n\nvar _create2 = _interopRequireDefault(_create);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = (0, _create2.default)({\n  name: 'argThat',\n  matches: function matches(matcherArgs, actual) {\n    var predicate = matcherArgs[0];\n    return predicate(actual);\n  }\n});","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/matchers/builtin/not.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _create = require('../create');\n\nvar _create2 = _interopRequireDefault(_create);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = (0, _create2.default)({\n  name: 'not',\n  matches: function matches(matcherArgs, actual) {\n    var expected = matcherArgs[0];\n    return !_lodashWrap2.default.isEqual(expected, actual);\n  }\n});","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/object.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _copyProperties = require('./util/copy-properties');\n\nvar _copyProperties2 = _interopRequireDefault(_copyProperties);\n\nvar _isConstructor = require('./replace/is-constructor');\n\nvar _isConstructor2 = _interopRequireDefault(_isConstructor);\n\nvar _log = require('./log');\n\nvar _log2 = _interopRequireDefault(_log);\n\nvar _constructor = require('./constructor');\n\nvar _constructor2 = _interopRequireDefault(_constructor);\n\nvar _function = require('./function');\n\nvar _function2 = _interopRequireDefault(_function);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DEFAULT_OPTIONS = { excludeMethods: ['then'] };\n\nexports.default = function (nameOrType, config) {\n  return _lodashWrap2.default.tap(fakeObject(nameOrType, config), function (obj) {\n    addToStringToDouble(obj, nameOrType);\n  });\n};\n\nvar fakeObject = function fakeObject(nameOrType, config) {\n  if (_lodashWrap2.default.isPlainObject(nameOrType)) {\n    return createTestDoublesForPlainObject(nameOrType);\n  } else if (_lodashWrap2.default.isArray(nameOrType)) {\n    return createTestDoublesForFunctionNames(nameOrType);\n  } else if (_lodashWrap2.default.isString(nameOrType) || nameOrType === undefined) {\n    return createTestDoubleViaProxy(nameOrType, withDefaults(config));\n  } else if (_lodashWrap2.default.isFunction(nameOrType)) {\n    ensureFunctionIsNotPassed();\n  } else {\n    ensureOtherGarbageIsNotPassed();\n  }\n};\n\nvar createTestDoublesForPlainObject = function createTestDoublesForPlainObject(obj) {\n  return _lodashWrap2.default.transform(_lodashWrap2.default.functions(obj), function (acc, funcName) {\n    acc[funcName] = (0, _isConstructor2.default)(obj[funcName]) ? (0, _constructor2.default)(obj[funcName]) : (0, _function2.default)('.' + funcName);\n  }, (0, _copyProperties2.default)(obj, _lodashWrap2.default.clone(obj)));\n};\n\nvar createTestDoublesForFunctionNames = function createTestDoublesForFunctionNames(names) {\n  return _lodashWrap2.default.transform(names, function (acc, funcName) {\n    acc[funcName] = (0, _function2.default)('.' + funcName);\n  });\n};\n\nvar createTestDoubleViaProxy = function createTestDoubleViaProxy(name, config) {\n  ensureProxySupport(name);\n  var obj = {};\n  return new Proxy(obj, {\n    get: function get(target, propKey, receiver) {\n      if (!obj.hasOwnProperty(propKey) && !_lodashWrap2.default.includes(config.excludeMethods, propKey)) {\n        obj[propKey] = (0, _function2.default)(nameOf(name) + '#' + propKey);\n      }\n      return obj[propKey];\n    }\n  });\n};\n\nvar ensureProxySupport = function ensureProxySupport(name) {\n  if (typeof Proxy === 'undefined') {\n    _log2.default.error('td.object', 'The current runtime does not have Proxy support, which is what\\ntestdouble.js depends on when a string name is passed to `td.object()`.\\n\\nMore details here:\\n  https://github.com/testdouble/testdouble.js/blob/master/docs/4-creating-test-doubles.md#objectobjectname\\n\\nDid you mean `td.object([\\'' + name + '\\'])`?');\n  }\n};\n\nvar ensureFunctionIsNotPassed = function ensureFunctionIsNotPassed() {\n  return _log2.default.error('td.object', 'Functions are not valid arguments to `td.object` (as of testdouble@2.0.0). Please use `td.function()` or `td.constructor()` instead for creating fake functions.');\n};\n\nvar ensureOtherGarbageIsNotPassed = function ensureOtherGarbageIsNotPassed() {\n  return _log2.default.error('td.object', 'To create a fake object with td.object(), pass it a plain object that contains\\nfunctions, an array of function names, or (if your runtime supports ES Proxy\\nobjects) a string name.\\n\\nIf you passed td.object an instance of a custom type, consider passing the\\ntype\\'s constructor to `td.constructor()` instead.\\n');\n};\n\nvar withDefaults = function withDefaults(config) {\n  return _lodashWrap2.default.extend({}, DEFAULT_OPTIONS, config);\n};\n\nvar addToStringToDouble = function addToStringToDouble(fakeObject, nameOrType) {\n  var name = nameOf(nameOrType);\n  fakeObject.toString = function () {\n    return '[test double object' + (name ? ' for \"' + name + '\"' : '') + ']';\n  };\n};\n\nvar nameOf = function nameOf(nameOrType) {\n  return _lodashWrap2.default.isString(nameOrType) ? nameOrType : '';\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/replace/is-constructor.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (thing) {\n  return thing && thing.prototype && _lodashWrap2.default.some(Object.getOwnPropertyNames(thing.prototype), function (property) {\n    return property !== 'constructor' && _lodashWrap2.default.isFunction(thing.prototype[property]);\n  });\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/replace/index.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (target) {\n  if (_lodashWrap2.default.isString(target)) {\n    return _module2.default.apply(undefined, arguments);\n  } else {\n    return _property2.default.apply(undefined, arguments);\n  }\n};\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _quibble = require('quibble');\n\nvar _quibble2 = _interopRequireDefault(_quibble);\n\nvar _module = require('./module');\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _property = require('./property');\n\nvar _property2 = _interopRequireDefault(_property);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_quibble2.default.ignoreCallsFromThisFile();","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/replace/module.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (path, stub) {\n  if (arguments.length > 1) {\n    return (0, _quibble2.default)(path, stub);\n  }\n  var realThing = requireAt(path);\n  var fakeThing = (0, _imitate2.default)(realThing, path);\n  (0, _quibble2.default)(path, fakeThing);\n  return fakeThing;\n};\n\nvar _imitate = require('./imitate');\n\nvar _imitate2 = _interopRequireDefault(_imitate);\n\nvar _quibble = require('quibble');\n\nvar _quibble2 = _interopRequireDefault(_quibble);\n\nvar _resolve = require('resolve');\n\nvar _resolve2 = _interopRequireDefault(_resolve);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_quibble2.default.ignoreCallsFromThisFile();\n\nvar requireAt = function requireAt(path) {\n  try {\n    // 1. Try just following quibble's inferred path\n    return require(_quibble2.default.absolutify(path));\n  } catch (e) {\n    // 2. Try including npm packages\n    return require(_resolve2.default.sync(path, { basedir: process.cwd() }));\n  }\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/replace/imitate.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _isConstructor = require('./is-constructor');\n\nvar _isConstructor2 = _interopRequireDefault(_isConstructor);\n\nvar _log = require('../log');\n\nvar _log2 = _interopRequireDefault(_log);\n\nvar _anything = require('../stringify/anything');\n\nvar _anything2 = _interopRequireDefault(_anything);\n\nvar _constructor = require('../constructor');\n\nvar _constructor2 = _interopRequireDefault(_constructor);\n\nvar _function = require('../function');\n\nvar _function2 = _interopRequireDefault(_function);\n\nvar _object = require('../object');\n\nvar _object2 = _interopRequireDefault(_object);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (realThing, optionalName) {\n  if ((0, _isConstructor2.default)(realThing)) {\n    return (0, _constructor2.default)(realThing);\n  } else if (_lodashWrap2.default.isPlainObject(realThing)) {\n    return (0, _object2.default)(realThing);\n  } else if (_lodashWrap2.default.isFunction(realThing)) {\n    return (0, _function2.default)(realThing, optionalName);\n  } else {\n    return _log2.default.error('td.replace', '\"' + optionalName + '\" property was found, but test double only knows how to replace functions, constructors, & objects containing functions (its value was ' + (0, _anything2.default)(realThing) + ').');\n  }\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/replace/property.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = function (object, property, manualReplacement) {\n  var isManual = arguments.length > 2;\n  var realThingExists = object[property] || object.hasOwnProperty(property);\n\n  if (isManual || realThingExists) {\n    var realThing = object[property];\n    return _lodashWrap2.default.tap(getFake(isManual, property, manualReplacement, realThing), function (fakeThing) {\n      object[property] = fakeThing;\n      _reset2.default.onNextReset(function () {\n        if (realThingExists) {\n          object[property] = realThing;\n        } else {\n          delete object[property];\n        }\n      });\n    });\n  } else {\n    _log2.default.error('td.replace', 'No \"' + property + '\" property was found.');\n  }\n};\n\nvar _lodashWrap = require('../util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _imitate = require('./imitate');\n\nvar _imitate2 = _interopRequireDefault(_imitate);\n\nvar _log = require('../log');\n\nvar _log2 = _interopRequireDefault(_log);\n\nvar _reset = require('../reset');\n\nvar _reset2 = _interopRequireDefault(_reset);\n\nvar _anything = require('../stringify/anything');\n\nvar _anything2 = _interopRequireDefault(_anything);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getFake = function getFake(isManual, property, manualReplacement, realThing) {\n  if (isManual) {\n    warnIfTypeMismatch(property, manualReplacement, realThing);\n    return manualReplacement;\n  } else {\n    return (0, _imitate2.default)(realThing, property);\n  }\n};\n\nvar warnIfTypeMismatch = function warnIfTypeMismatch(property, fakeThing, realThing) {\n  var fakeType = typeof fakeThing === 'undefined' ? 'undefined' : _typeof(fakeThing);\n  var realType = typeof realThing === 'undefined' ? 'undefined' : _typeof(realThing);\n  if (realThing !== undefined && fakeType !== realType) {\n    _log2.default.warn('td.replace', 'property \"' + property + '\" ' + (0, _anything2.default)(realThing) + ' (' + _lodashWrap2.default.capitalize(realType) + ') was replaced with ' + (0, _anything2.default)(fakeThing) + ', which has a different type (' + _lodashWrap2.default.capitalize(fakeType) + ').');\n  }\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/reset.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _quibble = require('quibble');\n\nvar _quibble2 = _interopRequireDefault(_quibble);\n\nvar _store = require('./store');\n\nvar _store2 = _interopRequireDefault(_store);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar resetHandlers = [];\n\nexports.default = _lodashWrap2.default.tap(function () {\n  _store2.default.reset();\n  _quibble2.default.reset();\n  _lodashWrap2.default.each(resetHandlers, function (resetHandler) {\n    return resetHandler();\n  });\n  resetHandlers = [];\n}, function (reset) {\n  reset.onNextReset = function (func) {\n    return resetHandlers.push(func);\n  };\n});","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/verify.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _argsMatch = require('./args-match');\n\nvar _argsMatch2 = _interopRequireDefault(_argsMatch);\n\nvar _calls = require('./store/calls');\n\nvar _calls2 = _interopRequireDefault(_calls);\n\nvar _log = require('./log');\n\nvar _log2 = _interopRequireDefault(_log);\n\nvar _store = require('./store');\n\nvar _store2 = _interopRequireDefault(_store);\n\nvar _arguments = require('./stringify/arguments');\n\nvar _arguments2 = _interopRequireDefault(_arguments);\n\nvar _stubbings = require('./store/stubbings');\n\nvar _stubbings2 = _interopRequireDefault(_stubbings);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (__userDoesRehearsalInvocationHere__) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var last = _calls2.default.pop();\n  ensureRehearsalOccurred(last);\n  if (_calls2.default.wasInvoked(last.testDouble, last.args, config)) {\n    // Do nothing! We're verified! :-D\n    warnIfStubbed(last.testDouble, last.args);\n  } else {\n    _log2.default.fail(unsatisfiedErrorMessage(last.testDouble, last.args, config));\n  }\n};\n\nvar ensureRehearsalOccurred = function ensureRehearsalOccurred(last) {\n  if (!last) {\n    _log2.default.error('td.verify', 'No test double invocation detected for `verify()`.\\n\\n  Usage:\\n    verify(myTestDouble(\\'foo\\'))');\n  }\n};\n\nvar warnIfStubbed = function warnIfStubbed(testDouble, actualArgs) {\n  if (_lodashWrap2.default.some(_stubbings2.default.for(testDouble), function (stubbing) {\n    return (0, _argsMatch2.default)(stubbing.args, actualArgs, stubbing.config);\n  })) {\n    _log2.default.warn('td.verify', 'test double' + stringifyName(testDouble) + ' was both stubbed and verified with arguments (' + (0, _arguments2.default)(actualArgs) + '), which is redundant and probably unnecessary.', 'https://github.com/testdouble/testdouble.js/blob/master/docs/B-frequently-asked-questions.md#why-shouldnt-i-call-both-tdwhen-and-tdverify-for-a-single-interaction-with-a-test-double');\n  }\n};\n\nvar unsatisfiedErrorMessage = function unsatisfiedErrorMessage(testDouble, args, config) {\n  return baseSummary(testDouble, args, config) + matchedInvocationSummary(testDouble, args, config) + invocationSummary(testDouble, args, config);\n};\n\nvar stringifyName = function stringifyName(testDouble) {\n  var name = _store2.default.for(testDouble).name;\n  return name ? ' `' + name + '`' : '';\n};\n\nvar baseSummary = function baseSummary(testDouble, args, config) {\n  return 'Unsatisfied verification on test double' + stringifyName(testDouble) + '.\\n\\n  Wanted:\\n    - called with `(' + (0, _arguments2.default)(args) + ')`' + timesMessage(config) + ignoreMessage(config) + '.';\n};\n\nvar invocationSummary = function invocationSummary(testDouble, args, config) {\n  var calls = _calls2.default.for(testDouble);\n  if (calls.length === 0) {\n    return '\\n\\n  But there were no invocations of the test double.';\n  } else {\n    return _lodashWrap2.default.reduce(calls, function (desc, call) {\n      return desc + ('\\n    - called with `(' + (0, _arguments2.default)(call.args) + ')`.');\n    }, '\\n\\n  All calls of the test double, in order were:');\n  }\n};\n\nvar matchedInvocationSummary = function matchedInvocationSummary(testDouble, args, config) {\n  var calls = _calls2.default.where(testDouble, args, config);\n  var expectedCalls = config.times || 0;\n\n  if (calls.length === 0 || calls.length > expectedCalls) {\n    return '';\n  } else {\n    return _lodashWrap2.default.reduce(_lodashWrap2.default.groupBy(calls, 'args'), function (desc, callsMatchingArgs, args) {\n      return desc + ('\\n    - called ' + pluralize(callsMatchingArgs.length, 'time') + ' with `(' + (0, _arguments2.default)(callsMatchingArgs[0].args) + ')`.');\n    }, '\\n\\n  ' + pluralize(calls.length, 'call') + ' that satisfied this verification:');\n  }\n};\n\nvar pluralize = function pluralize(x, msg) {\n  return x + ' ' + msg + (x === 1 ? '' : 's');\n};\n\nvar timesMessage = function timesMessage(config) {\n  return config.times != null ? ' ' + pluralize(config.times, 'time') : '';\n};\n\nvar ignoreMessage = function ignoreMessage(config) {\n  return config.ignoreExtraArgs != null ? ', ignoring any additional arguments' : '';\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/version.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = '2.1.2';","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/when.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodashWrap = require('./util/lodash-wrap');\n\nvar _lodashWrap2 = _interopRequireDefault(_lodashWrap);\n\nvar _callback = require('./matchers/callback');\n\nvar _callback2 = _interopRequireDefault(_callback);\n\nvar _calls = require('./store/calls');\n\nvar _calls2 = _interopRequireDefault(_calls);\n\nvar _log = require('./log');\n\nvar _log2 = _interopRequireDefault(_log);\n\nvar _stubbings = require('./store/stubbings');\n\nvar _stubbings2 = _interopRequireDefault(_stubbings);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (__userDoesRehearsalInvocationHere__) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    thenReturn: function thenReturn() {\n      for (var _len = arguments.length, stubbedValues = Array(_len), _key = 0; _key < _len; _key++) {\n        stubbedValues[_key] = arguments[_key];\n      }\n\n      return addStubbing(stubbedValues, config, 'thenReturn');\n    },\n    thenCallback: function thenCallback() {\n      for (var _len2 = arguments.length, stubbedValues = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        stubbedValues[_key2] = arguments[_key2];\n      }\n\n      return addStubbing(stubbedValues, config, 'thenCallback');\n    },\n    thenDo: function thenDo() {\n      for (var _len3 = arguments.length, stubbedValues = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        stubbedValues[_key3] = arguments[_key3];\n      }\n\n      return addStubbing(stubbedValues, config, 'thenDo');\n    },\n    thenThrow: function thenThrow() {\n      for (var _len4 = arguments.length, stubbedValues = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        stubbedValues[_key4] = arguments[_key4];\n      }\n\n      return addStubbing(stubbedValues, config, 'thenThrow');\n    },\n    thenResolve: function thenResolve() {\n      warnIfPromiseless();\n\n      for (var _len5 = arguments.length, stubbedValues = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        stubbedValues[_key5] = arguments[_key5];\n      }\n\n      return addStubbing(stubbedValues, config, 'thenResolve');\n    },\n    thenReject: function thenReject() {\n      warnIfPromiseless();\n\n      for (var _len6 = arguments.length, stubbedValues = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        stubbedValues[_key6] = arguments[_key6];\n      }\n\n      return addStubbing(stubbedValues, config, 'thenReject');\n    }\n  };\n};\n\nvar addStubbing = function addStubbing(stubbedValues, config, plan) {\n  var last = _calls2.default.pop();\n  ensureRehearsalOccurred(last);\n  _lodashWrap2.default.assign(config, { plan: plan });\n  _stubbings2.default.add(last.testDouble, concatImpliedCallback(last.args, config), stubbedValues, config);\n  return last.testDouble;\n};\n\nvar ensureRehearsalOccurred = function ensureRehearsalOccurred(last) {\n  if (!last) {\n    return _log2.default.error('td.when', 'No test double invocation call detected for `when()`.\\n\\n  Usage:\\n    when(myTestDouble(\\'foo\\')).thenReturn(\\'bar\\')');\n  }\n};\n\nvar concatImpliedCallback = function concatImpliedCallback(args, config) {\n  if (config.plan !== 'thenCallback') {\n    return args;\n  } else if (!_lodashWrap2.default.some(args, _callback2.default.isCallback)) {\n    return args.concat(_callback2.default);\n  } else {\n    return args;\n  }\n};\n\nvar warnIfPromiseless = function warnIfPromiseless() {\n  if ((0, _config2.default)().promiseConstructor == null) {\n    _log2.default.warn('td.when', 'no promise constructor is set, so this `thenResolve` or `thenReject` stubbing\\nwill fail if it\\'s satisfied by an invocation on the test double. You can tell\\ntestdouble.js which promise constructor to use with `td.config`, like so:\\n\\n  td.config({\\n    promiseConstructor: require(\\'bluebird\\')\\n  })');\n  }\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/testem.js":"var pkg = require('./package.json')\n\nmodule.exports = {\n  launch_in_dev: ['chrome'],\n  launch_in_ci: ['phantomjs'],\n  framework: 'mocha+chai',\n  serve_files: [pkg.config.test_bundle]\n}\n","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/quibble.browser.js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  absolutify: function absolutify() {},\n  ignoreCallsFromThisFile: function ignoreCallsFromThisFile() {},\n  reset: function reset() {}\n};","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/src/testdouble.js":"import callback from './matchers/callback'\nimport config from './config'\nimport constructor from './constructor'\nimport explain from './explain'\nimport matchers from './matchers'\nimport object from './object'\nimport replace from './replace'\nimport reset from './reset'\nimport tdFunction from './function'\nimport verify from './verify'\nimport version from './version'\nimport when from './when'\n\nmodule.exports = {\n  function: tdFunction,\n  func: tdFunction,\n  object,\n  constructor,\n  when,\n  verify,\n  matchers,\n  replace,\n  explain,\n  reset,\n  config,\n  callback,\n  version\n}\n","/home/travis/build/npmtest/node-npmtest-testdouble/node_modules/testdouble/lib/replace/module.browser.js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  throw Error('This is only supported on Node.js');\n};"}